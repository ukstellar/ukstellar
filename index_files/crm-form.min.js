(function(){function t(){function t(){if(e>5&&clearInterval(r),$(".contact-form").length>0){function t(){var t=$("#clicsterForm").find(".contact-input").filter("[required]:visible"),e={};return t.each(function(t,r){"email"==r.type?e[r.name]={email:!0}:e[r.name]={required:!0}}),e}function n(){if(p.length)window.location.href=$(p).val();else{var t=$(".form-message-container .ms-success");setTimeout(()=>{t.addClass("active"),d(t[0]),$("#clicsterFormSubmit").css("pointer-events","painted"),$("#clicsterFormSubmit").html(v),m()},100)}}function s(t){i(function(){t>0?a(t,function(){n()},function(){n()}):n()},function(t,e,r){localStorage.setItem("submitFormToClicsterError",JSON.stringify({response:t.responseText,status:e,error:r}));var n=$(".form-message-container .ms-error");setTimeout(()=>{n.addClass("active"),$("#clicsterFormSubmit").html(v),$("#clicsterFormSubmit").css("pointer-events","painted"),d(n[0]),m()},100)})}function a(t,e,r){var n={quote_id:t,superImportant:null};u("POST","/lead-form-crm-html",JSON.stringify(n),e,r)}function i(t,e){var r=$("#clicsterForm").attr("data-clicster-user"),n="",s="POST",a=JSON.stringify(c($("#clicsterForm")));if(r)n="https://"+r+".alboomcrm.com/api/leads/add",u(s,n,a,t,e,!1);else{var i=$(".form-message-container .ms-error");setTimeout(()=>{i.addClass("active"),$("#clicsterFormSubmit").html(v),$("#clicsterFormSubmit").css("pointer-events","painted"),d(i[0]),m()},100)}}function o(t,e){var r=l();u("POST","/lead-form-crm-html",JSON.stringify(r),t,e)}function c(t){var e,r={},n=$(t).serializeArray(),s=n.length;for(e=0;e<s;e++)n[e].value&&(r[n[e].name]=n[e].value);return r}function l(){var t={data:{},status:"OK",clicsterFormResponse:1},e="",r=$("input#superImportantText"),n=$("#clicsterForm").attr("data-clicster-user");return $(".contact-input").each(function(){void 0!==$(this).data("label")&&$(this).val()&&(e=$(this).val().replace(/'/g,"\\'"),t.data[$(this).data("label")]=e)}),r&&(t.data[r.data("label")]=r.val()),n&&(t.data.clicsterUser=n),t}function u(t,e,r,n,s,a){void 0===a&&(a=!0),$.ajax({beforeSend:function(t){a&&t.setRequestHeader("X-Requested-With","XMLHttpRequest")},async:!0,crossDomain:!0,url:e,method:"POST",processData:!1,data:r,success:n,error:s})}function m(){$(".close-message").length&&$(".close-message").map(function(t,e){e.addEventListener("click",function(){this.parentNode.classList.remove("active")},!1)})}function d(t){if(0===window.scrollY)return;const e=15,r=-(window.scrollY-t.offsetTop)/e,n=setInterval(()=>{t.getBoundingClientRect().top<=30?window.scrollBy(0,r):clearInterval(n)},e)}if(handleContactSubType=function(t){var e,r=t.currentTarget,n=r.options[r.selectedIndex].getAttribute("data-subtype"),s=document.getElementsByClassName("subtype-inputs"),a=s.length;if(n)for(e=0;e<a;e++)s[e].dataset.subtype!==n?s[e].style.display="none":s[e].style.display="block"},"function"==typeof flatpickr){var f={disableMobile:"true"};"undefined"!=typeof flatpickr_location&&(f.locale=flatpickr_location),flatpickr("input[data-date-format]",f)}if($("#clicsterForm").length){var p=$("#clicsterForm input[name=redirect-to]"),v=$("#clicsterFormSubmit").text();$("#clicsterForm").validate({rules:t(),submitHandler:function(){$("#clicsterFormSubmit").css("pointer-events","none"),$("#clicsterFormSubmit").html($("#clicsterFormSubmit").data("sending")),$("input#superImportantText","#clicsterForm").length||$("#clicsterForm").append('<input id="superImportantText" data-label="superImportant" type="hidden" name="superImportant">'),o(function(t){if("string"==typeof t&&(t=JSON.parse(t)),"success"===t.status){var e=t.quote_id;s(e)}},function(t,e,r){t.responseText=JSON.parse(t.responseText),localStorage.setItem("contract_errors",JSON.stringify({response:t.responseText,status:e,error:r})),"error"===t.responseText.status&&"Crawlers / Bots detected"===t.responseText.info?window.location.href=window.location.pathname+"/falha":s()})}})}clearInterval(r)}e+=1}var e=0,r=setInterval(t,1e3)}t()})();